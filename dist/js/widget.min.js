!function(t,e,n,i){"use strict";function o(e,n){this.element=e,this.page=t(e).find(".page"),this.options=t.extend({},l,n),this._defaults=l,this._name=s,this.isLoading=!0,this.draggable=null,this.tween=null,this.calculateProgress=null,this.init()}var s="autoScroll",l={by:"continuous",speed:"medium",pause:5,click:!1,minimumMovement:3};o.prototype={init:function(){function e(){s.tween.pause(),TweenLite.killDelayedCallsTo(s.calculateProgress),TweenLite.killDelayedCallsTo(l),TweenLite.killDelayedCallsTo(a)}var n,o,s=this,l=null,a=null,r=t(this.element).outerHeight(!0),c=r,u=this.element.scrollHeight-this.element.offsetHeight;this.calculateProgress=function(){c=t(s.element).scrollTop()+r,s.tween.progress(t(s.element).scrollTop()/u).play()},this.canScroll()?("page"===this.options.by?(n="fastest"===this.options.speed?.4:"fast"===this.options.speed?.8:"medium"===this.options.speed?1.2:"slow"===this.options.speed?1.6:2,o=this.page.outerHeight(!0)/t(this.element).outerHeight(!0)*n):(n="fastest"===this.options.speed?60:"fast"===this.options.speed?50:"medium"===this.options.speed?40:"slow"===this.options.speed?30:20,o=Math.abs((this.page.outerHeight(!0)-t(this.element).outerHeight(!0))/n)),Draggable.create(this.element,{type:"scrollTop",throwProps:!0,edgeResistance:.75,minimumMovement:s.options.minimumMovement,onPress:function(){e()},onRelease:function(){"none"!==s.options.by&&TweenLite.delayedCall(s.options.pause,s.calculateProgress)},onClick:function(){s.options.click&&(e(),t(s.element).trigger("scrollClick",[this.pointerEvent]))}}),this.draggable=Draggable.get(this.element),this.tween=TweenLite.to(this.draggable.scrollProxy,o,{scrollTop:u,ease:Linear.easeNone,delay:this.options.pause,paused:!0,onUpdate:"page"===this.options.by?function(){Math.abs(s.draggable.scrollProxy.top())>=c&&(s.tween.pause(),c+=r,TweenLite.delayedCall(s.options.pause,a=function(){s.tween.resume()}))}:i,onComplete:function(){TweenLite.delayedCall(s.options.pause,l=function(){TweenLite.to(s.page,1,{autoAlpha:0,onComplete:function(){s.tween.seek(0).pause(),"page"===s.options.by&&(c=r),t(s.element).trigger("done")}})})}}),TweenLite.set(this.element,{overflowY:"hidden"})):this.options.click&&(Draggable.create(this.element,{type:"scrollTop",throwProps:!0,edgeResistance:.95,minimumMovement:this.options.minimumMovement,onClick:function(){t(s.element).trigger("scrollClick",[this.pointerEvent])}}),this.draggable=Draggable.get(this.element))},canScroll:function(){return this.options&&this.page.height()>t(this.element).height()},destroy:function(){t(this.element).removeData(),this.tween&&this.tween.kill(),this.draggable&&this.draggable.kill(),this.element=null,this.page=null,this.options=null,this._defaults=null,this.draggable=null,this.tween=null,this.calculateProgress=null}},o.prototype.play=function(){this.canScroll()&&"none"!==this.options.by&&this.tween&&(this.isLoading?(this.tween.play(),this.isLoading=!1):(TweenLite.to(this.page,1,{autoAlpha:1}),TweenLite.delayedCall(this.options.pause,this.calculateProgress)))},o.prototype.pause=function(){this.tween&&(TweenLite.killDelayedCallsTo(this.calculateProgress),this.tween.pause())},o.prototype.stop=function(){this.tween&&(TweenLite.killDelayedCallsTo(this.calculateProgress),this.tween.kill()),this.element=null,this.page=null},t.fn.autoScroll=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new o(this,e))})}}(jQuery,window,document);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function t(t,e){var n="font-family:"+e.font.family+"; ",i="color: "+e.color+"; ",o="font-size: "+e.size+"px; ",s="font-weight: "+(e.bold?"bold":"normal")+"; ",l="font-style: "+(e.italic?"italic":"normal")+"; ",a="text-decoration: "+(e.underline?"underline":"none")+"; ",r="background-color: "+e.highlightColor+"; ";return"."+t+" {"+n+i+o+s+l+a+r+"}"}function e(t){for(var e=document.createElement("style"),n=0,i=t.length;i>n;n++)e.appendChild(document.createTextNode(t[n]));document.head.appendChild(e)}function n(n,s){n.forEach(function(n){n.class&&n.fontSetting&&e([t(n.class,n.fontSetting)]),n.fontSetting.font.type&&("custom"===n.fontSetting.font.type&&n.fontSetting.font.family&&n.fontSetting.font.url?i(n.fontSetting.font.family,n.fontSetting.font.url,s):"google"===n.fontSetting.font.type&&n.fontSetting.font.family&&o(n.fontSetting.font.family,s))})}function i(t,e,n){var i=null,o="font-family: "+t+"; src: url('"+e+"');";n=n||document,i=n.styleSheets[0],null!==i&&i.addRule("@font-face",o)}function o(t,e){var n=document.createElement("link");e=e||document,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://fonts.googleapis.com/css?family="+t),null!==n&&e.getElementsByTagName("head")[0].appendChild(n)}function s(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i]=new Image,n[i].src=t[i]}function l(t){for(var e,n=window.location.search.substring(1),i=n.split("&"),o=0;o<i.length;o++)if(e=i[o].split("="),e[0]==t)return decodeURIComponent(e[1]);return""}return{getQueryParameter:l,getFontCssStyle:t,addCSSRules:e,loadFonts:n,loadCustomFont:i,loadGoogleFont:o,preloadImages:s}}();var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-13"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();var RiseVision=RiseVision||{};RiseVision.Text={},RiseVision.Text=function(t){"use strict";function e(){t.rpc.call("","rsevent_ready",null,r.getString("id"),!0,!0,!0,!0,!0)}function n(){t.rpc.call("","rsevent_done",null,r.getString("id"))}function i(t,i){if("additionalParams"===t&&i){var s=JSON.parse(i),l=s.data,a=[];$("#container").height(r.getInt("rsH")).css("background-color",s.background||"transparent"),$(".page").width(r.getInt("rsW")).html(l),$.each($("<div/>").html(l).find("span").addBack(),function(){var t=$(this).attr("data-standard-font"),e=$(this).attr("data-google-font"),n=$(this).attr("data-custom-font"),i="",s="",l=[];t&&a.push(o(t)),e&&(c.loadGoogleFont(e),a.push(o(e))),n&&(c.loadCustomFont(n,$(this).attr("data-custom-font-url")),a.push(o(n))),l=this.className.split(" "),i=$(this).attr("data-text-color"),s=$(this).attr("data-highlight-color");for(var r=0,u=l.length;u>r;r++)0===l[r].indexOf("wysiwyg-text-color")?a.push("."+l[r]+" { color: "+i+"; }"):0===l[r].indexOf("wysiwyg-highlight-color")&&a.push("."+l[r]+" { background-color: "+s+"; }")}),c.addCSSRules(a),$("#container").autoScroll(s.scroll).on("done",function(){n()})}e()}function o(t){return".wysiwyg-font-family-"+t.replace(/ /g,"-").toLowerCase()+" { font-family: '"+t+"', serif; }"}function s(){$("#container").data("plugin_autoScroll").play()}function l(){$("#container").data("plugin_autoScroll").pause()}function a(){l()}var r=new t.Prefs,c=RiseVision.Common.Utilities;return{getAdditionalParams:i,play:s,pause:l,stop:a}}(gadgets),function(t,e){"use strict";function n(){RiseVision.Text.play()}function i(){RiseVision.Text.pause()}function o(){RiseVision.Text.stop()}var s=new e.Prefs,l=s.getString("id");l&&(e.rpc.register("rscmd_play_"+l,n),e.rpc.register("rscmd_pause_"+l,i),e.rpc.register("rscmd_stop_"+l,o),e.rpc.register("rsparam_set_"+l,RiseVision.Text.getAdditionalParams),e.rpc.call("","rsparam_get",null,l,"additionalParams")),t.oncontextmenu=function(){return!1}}(window,gadgets);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiUGx1Z2luIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJ0aGlzIiwicGFnZSIsImZpbmQiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl9kZWZhdWx0cyIsIl9uYW1lIiwicGx1Z2luTmFtZSIsImlzTG9hZGluZyIsImRyYWdnYWJsZSIsInR3ZWVuIiwiY2FsY3VsYXRlUHJvZ3Jlc3MiLCJpbml0IiwiYnkiLCJzcGVlZCIsInBhdXNlIiwiY2xpY2siLCJtaW5pbXVtTW92ZW1lbnQiLCJwcm90b3R5cGUiLCJwYXVzZVR3ZWVuIiwic2VsZiIsIlR3ZWVuTGl0ZSIsImtpbGxEZWxheWVkQ2FsbHNUbyIsInNjcm9sbENvbXBsZXRlIiwicGFnZUNvbXBsZXRlIiwiZHVyYXRpb24iLCJlbGVtZW50SGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJwYXVzZUhlaWdodCIsIm1heCIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsInNjcm9sbFRvcCIsInByb2dyZXNzIiwicGxheSIsImNhblNjcm9sbCIsIk1hdGgiLCJhYnMiLCJEcmFnZ2FibGUiLCJjcmVhdGUiLCJ0eXBlIiwidGhyb3dQcm9wcyIsImVkZ2VSZXNpc3RhbmNlIiwib25QcmVzcyIsIm9uUmVsZWFzZSIsImRlbGF5ZWRDYWxsIiwib25DbGljayIsInRyaWdnZXIiLCJwb2ludGVyRXZlbnQiLCJnZXQiLCJ0byIsInNjcm9sbFByb3h5IiwiZWFzZSIsIkxpbmVhciIsImVhc2VOb25lIiwiZGVsYXkiLCJwYXVzZWQiLCJvblVwZGF0ZSIsInRvcCIsInJlc3VtZSIsIm9uQ29tcGxldGUiLCJhdXRvQWxwaGEiLCJzZWVrIiwic2V0Iiwib3ZlcmZsb3dZIiwiaGVpZ2h0IiwiZGVzdHJveSIsInJlbW92ZURhdGEiLCJraWxsIiwic3RvcCIsImZuIiwiYXV0b1Njcm9sbCIsImVhY2giLCJkYXRhIiwialF1ZXJ5IiwiUmlzZVZpc2lvbiIsIkNvbW1vbiIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImNsYXNzTmFtZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJmb250IiwiY29sb3IiLCJzaXplIiwid2VpZ2h0IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImhpZ2hsaWdodCIsImhpZ2hsaWdodENvbG9yIiwiYWRkQ1NTUnVsZXMiLCJydWxlcyIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImkiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImxvYWRGb250cyIsInNldHRpbmdzIiwiY29udGVudERvYyIsImZvckVhY2giLCJpdGVtIiwiY2xhc3MiLCJmb250U2V0dGluZyIsInVybCIsImxvYWRDdXN0b21Gb250IiwibG9hZEdvb2dsZUZvbnQiLCJzaGVldCIsInJ1bGUiLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJzdHlsZXNoZWV0Iiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwic3JjIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsInBhaXIiLCJxdWVyeSIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiX2dhcSIsInB1c2giLCJnYSIsImFzeW5jIiwicHJvdG9jb2wiLCJzIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIlRleHQiLCJnYWRnZXRzIiwicmVhZHkiLCJycGMiLCJjYWxsIiwicHJlZnMiLCJnZXRTdHJpbmciLCJkb25lIiwiZ2V0QWRkaXRpb25hbFBhcmFtcyIsIm5hbWUiLCJ2YWx1ZSIsInBhcmFtcyIsIkpTT04iLCJwYXJzZSIsImdldEludCIsImNzcyIsImJhY2tncm91bmQiLCJ3aWR0aCIsImh0bWwiLCJhZGRCYWNrIiwic3RhbmRhcmRGb250IiwiYXR0ciIsImdvb2dsZUZvbnQiLCJjdXN0b21Gb250IiwidGV4dENvbG9yIiwiY2xhc3NlcyIsImNyZWF0ZUZvbnRSdWxlIiwidXRpbHMiLCJpbmRleE9mIiwic2Nyb2xsIiwib24iLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJQcmVmcyIsImlkIiwicmVnaXN0ZXIiLCJvbmNvbnRleHRtZW51Il0sIm1hcHBpbmdzIjoiQ0FPQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUNoQyxZQVlBLFNBQVNDLEdBQU9DLEVBQVNDLEdBQ3hCQyxLQUFLRixRQUFVQSxFQUNmRSxLQUFLQyxLQUFPUixFQUFFSyxHQUFTSSxLQUFLLFNBQzVCRixLQUFLRCxRQUFVTixFQUFFVSxVQUFXQyxFQUFVTCxHQUN0Q0MsS0FBS0ssVUFBWUQsRUFDakJKLEtBQUtNLE1BQVFDLEVBQ2JQLEtBQUtRLFdBQVksRUFDakJSLEtBQUtTLFVBQVksS0FDakJULEtBQUtVLE1BQVEsS0FDYlYsS0FBS1csa0JBQW9CLEtBQ3pCWCxLQUFLWSxPQXBCTixHQUFJTCxHQUFhLGFBQ2hCSCxHQUNDUyxHQUFJLGFBQ0pDLE1BQU8sU0FDUEMsTUFBTyxFQUNQQyxPQUFPLEVBQ1BDLGdCQUFpQixFQWlCbkJwQixHQUFPcUIsV0FDTk4sS0FBTSxXQVNMLFFBQVNPLEtBQ1JDLEVBQUtWLE1BQU1LLFFBRVhNLFVBQVVDLG1CQUFtQkYsRUFBS1QsbUJBQ2xDVSxVQUFVQyxtQkFBbUJDLEdBRTdCRixVQUFVQyxtQkFBbUJFLEdBZDlCLEdBQUlWLEdBQU9XLEVBQ1BMLEVBQU9wQixLQUNQdUIsRUFBaUIsS0FDakJDLEVBQWUsS0FDZkUsRUFBZ0JqQyxFQUFFTyxLQUFLRixTQUFTNkIsYUFBWSxHQUM1Q0MsRUFBY0YsRUFDZEcsRUFBTTdCLEtBQUtGLFFBQVFnQyxhQUFlOUIsS0FBS0YsUUFBUWlDLFlBV25EL0IsTUFBS1csa0JBQW9CLFdBRXhCaUIsRUFBY25DLEVBQUUyQixFQUFLdEIsU0FBU2tDLFlBQzdCTixFQUVETixFQUFLVixNQUFNdUIsU0FBU3hDLEVB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SUosR0FBUWdDLE1BQ3BCQyxFQUFLN0IsRUFBTUMsVUFBVSxLQWVyQjRCLEtBQ0ZqQyxFQUFRRSxJQUFJZ0MsU0FBUyxjQUFnQkQsRUFBSTVJLEdBQ3pDMkcsRUFBUUUsSUFBSWdDLFNBQVMsZUFBaUJELEVBQUkvSixHQUMxQzhILEVBQVFFLElBQUlnQyxTQUFTLGNBQWdCRCxFQUFJekcsR0FFekN3RSxFQUFRRSxJQUFJZ0MsU0FBUyxlQUFpQkQsRUFBSW5HLFdBQVdpRSxLQUFLUSxxQkFDMURQLEVBQVFFLElBQUlDLEtBQUssR0FBSSxjQUFlLEtBQU04QixFQUFJLHFCQUdoRHBMLEVBQU9zTCxjQUFnQixXQUNyQixPQUFPLElBRVJ0TCxPQUFRbUoiLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgUHJvamVjdDogQXV0by1TY3JvbGxcbiAqICBEZXNjcmlwdGlvbjogQXV0by1zY3JvbGwgcGx1Z2luIGZvciB1c2Ugd2l0aCBSaXNlIFZpc2lvbiBXaWRnZXRzXG4gKiAgQXV0aG9yOiBAZG9ubmFwZXBcbiAqICBMaWNlbnNlOiBNSVRcbiAqL1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIHBsdWdpbk5hbWUgPSBcImF1dG9TY3JvbGxcIixcblx0XHRkZWZhdWx0cyA9IHtcblx0XHRcdGJ5OiBcImNvbnRpbnVvdXNcIixcblx0XHRcdHNwZWVkOiBcIm1lZGl1bVwiLFxuXHRcdFx0cGF1c2U6IDUsXG5cdFx0XHRjbGljazogZmFsc2UsXG5cdFx0XHRtaW5pbXVtTW92ZW1lbnQ6IDMgLy8gRHJhZ2dhYmxlIGRlZmF1bHQgdmFsdWUgLSBodHRwOi8vZ3JlZW5zb2NrLmNvbS9kb2NzLyMvSFRNTDUvRHJhZy9EcmFnZ2FibGUvXG5cdFx0fTtcblxuXG5cdGZ1bmN0aW9uIFBsdWdpbihlbGVtZW50LCBvcHRpb25zKSB7XG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLnBhZ2UgPSAkKGVsZW1lbnQpLmZpbmQoXCIucGFnZVwiKTtcblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcdHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG5cdFx0dGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cdFx0dGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuXHRcdHRoaXMuZHJhZ2dhYmxlID0gbnVsbDtcblx0XHR0aGlzLnR3ZWVuID0gbnVsbDtcblx0XHR0aGlzLmNhbGN1bGF0ZVByb2dyZXNzID0gbnVsbDtcblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdFBsdWdpbi5wcm90b3R5cGUgPSB7XG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHNwZWVkLCBkdXJhdGlvbjtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHZhciBzY3JvbGxDb21wbGV0ZSA9IG51bGw7XG5cdFx0XHR2YXIgcGFnZUNvbXBsZXRlID0gbnVsbDtcblx0XHRcdHZhciBlbGVtZW50SGVpZ2h0ID0gJCh0aGlzLmVsZW1lbnQpLm91dGVySGVpZ2h0KHRydWUpO1xuXHRcdFx0dmFyIHBhdXNlSGVpZ2h0ID0gZWxlbWVudEhlaWdodDtcblx0XHRcdHZhciBtYXggPSB0aGlzLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtcblxuXHRcdFx0ZnVuY3Rpb24gcGF1c2VUd2VlbigpIHtcblx0XHRcdFx0c2VsZi50d2Vlbi5wYXVzZSgpO1xuXG5cdFx0XHRcdFR3ZWVuTGl0ZS5raWxsRGVsYXllZENhbGxzVG8oc2VsZi5jYWxjdWxhdGVQcm9ncmVzcyk7XG5cdFx0XHRcdFR3ZWVuTGl0ZS5raWxsRGVsYXllZENhbGxzVG8oc2Nyb2xsQ29tcGxldGUpO1xuXHRcdFx0XHQvLyBPbmx5IHVzZWQgd2hlbiBzY3JvbGxpbmcgYnkgcGFnZS5cblx0XHRcdFx0VHdlZW5MaXRlLmtpbGxEZWxheWVkQ2FsbHNUbyhwYWdlQ29tcGxldGUpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmNhbGN1bGF0ZVByb2dyZXNzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIFNldCBwYXVzZUhlaWdodCB0byBuZXcgdmFsdWUuXG5cdFx0XHRcdHBhdXNlSGVpZ2h0ID0gJChzZWxmLmVsZW1lbnQpLnNjcm9sbFRvcCgpICtcblx0XHRcdFx0XHRlbGVtZW50SGVpZ2h0O1xuXG5cdFx0XHRcdHNlbGYudHdlZW4ucHJvZ3Jlc3MoJChzZWxmLmVsZW1lbnQpLnNjcm9sbFRvcCgpIC8gbWF4KVxuXHRcdFx0XHRcdC5wbGF5KCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRpZiAodGhpcy5jYW5TY3JvbGwoKSkge1xuXHRcdFx0XHQvLyBTZXQgc2Nyb2xsIHNwZWVkLlxuXHRcdFx0XHRpZiAodGhpcy5vcHRpb25zLmJ5ID09PSBcInBhZ2VcIikge1xuXHRcdFx0XHRcdGlmICh0aGlzLm9wdGlvbnMuc3BlZWQgPT09IFwiZmFzdGVzdFwiKSB7XG5cdFx0XHRcdFx0XHRzcGVlZCA9IDAuNDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAodGhpcy5vcHRpb25zLnNwZWVkID09PSBcImZhc3RcIikge1xuXHRcdFx0XHRcdFx0c3BlZWQgPSAwLjg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zcGVlZCA9PT0gXCJtZWRpdW1cIikge1xuXHRcdFx0XHRcdFx0c3BlZWQgPSAxLjI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zcGVlZCA9PT0gXCJzbG93XCIpIHtcblx0XHRcdFx0XHRcdHNwZWVkID0gMS42O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHNwZWVkID0gMjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRkdXJhdGlvbiA9IHRoaXMucGFnZS5vdXRlckhlaWdodCh0cnVlKSAvXG5cdFx0XHRcdFx0XHQkKHRoaXMuZWxlbWVudCkub3V0ZXJIZWlnaHQodHJ1ZSkgKiBzcGVlZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHsgIC8vIENvbnRpbnVvdXMgb3IgYnkgcm93XG5cdFx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5zcGVlZCA9PT0gXCJmYXN0ZXN0XCIpIHtcblx0XHRcdFx0XHRcdHNwZWVkID0gNjA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zcGVlZCA9PT0gXCJmYXN0XCIpIHtcblx0XHRcdFx0XHRcdHNwZWVkID0gNTA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zcGVlZCA9PT0gXCJtZWRpdW1cIikge1xuXHRcdFx0XHRcdFx0c3BlZWQgPSA0MDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAodGhpcy5vcHRpb25zLnNwZWVkID09PSBcInNsb3dcIikge1xuXHRcdFx0XHRcdFx0c3BlZWQgPSAzMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRzcGVlZCA9IDIwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGR1cmF0aW9uID0gTWF0aC5hYnMoKHRoaXMucGFnZS5vdXRlckhlaWdodCh0cnVlKSAtXG5cdFx0XHRcdFx0XHQkKHRoaXMuZWxlbWVudCkub3V0ZXJIZWlnaHQodHJ1ZSkpIC8gc3BlZWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0RHJhZ2dhYmxlLmNyZWF0ZSh0aGlzLmVsZW1lbnQsIHtcblx0XHRcdFx0XHR0eXBlOiBcInNjcm9sbFRvcFwiLFxuXHRcdFx0XHRcdHRocm93UHJvcHM6IHRydWUsXG5cdFx0XHRcdFx0ZWRnZVJlc2lzdGFuY2U6IDAuNzUsXG5cdFx0XHRcdFx0bWluaW11bU1vdmVtZW50OiBzZWxmLm9wdGlvbnMubWluaW11bU1vdmVtZW50LFxuXHRcdFx0XHRcdG9uUHJlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cGF1c2VUd2VlbigpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25SZWxlYXNlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmIChzZWxmLm9wdGlvbnMuYnkgIT09IFwibm9uZVwiKSB7XG5cdFx0XHRcdFx0XHRcdC8qIEZpZ3VyZSBvdXQgd2hhdCB0aGUgbmV3IHNjcm9sbCBwb3NpdGlvbiBpcyBhbmRcblx0XHRcdFx0XHRcdFx0IHRyYW5zbGF0ZSB0aGF0IGludG8gdGhlIHByb2dyZXNzIG9mIHRoZSB0d2VlbiAoMC0xKVxuXHRcdFx0XHRcdFx0XHQgc28gdGhhdCB3ZSBjYW4gY2FsaWJyYXRlIGl0OyBvdGhlcndpc2UsIGl0J2QganVtcFxuXHRcdFx0XHRcdFx0XHQgYmFjayB0byB3aGVyZSBpdCBwYXVzZWQgd2hlbiB3ZSByZXN1bWUoKS4gKi9cblx0XHRcdFx0XHRcdFx0VHdlZW5MaXRlLmRlbGF5ZWRDYWxsKHNlbGYub3B0aW9ucy5wYXVzZSwgc2VsZi5jYWxjdWxhdGVQcm9ncmVzcyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbkNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmIChzZWxmLm9wdGlvbnMuY2xpY2spIHtcblx0XHRcdFx0XHRcdFx0cGF1c2VUd2VlbigpO1xuXHRcdFx0XHRcdFx0XHQkKHNlbGYuZWxlbWVudCkudHJpZ2dlcihcInNjcm9sbENsaWNrXCIsIFt0aGlzLnBvaW50ZXJFdmVudF0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0dGhpcy5kcmFnZ2FibGUgPSBEcmFnZ2FibGUuZ2V0KHRoaXMuZWxlbWVudCk7XG5cblx0XHRcdFx0dGhpcy50d2VlbiA9IFR3ZWVuTGl0ZS50byh0aGlzLmRyYWdnYWJsZS5zY3JvbGxQcm94eSwgZHVyYXRpb24sIHtcblx0XHRcdFx0XHRzY3JvbGxUb3A6IG1heCxcblx0XHRcdFx0XHRlYXNlOiBMaW5lYXIuZWFzZU5vbmUsXG5cdFx0XHRcdFx0ZGVsYXk6IHRoaXMub3B0aW9ucy5wYXVzZSxcblx0XHRcdFx0XHRwYXVzZWQ6IHRydWUsXG5cdFx0XHRcdFx0b25VcGRhdGU6ICh0aGlzLm9wdGlvbnMuYnkgPT09IFwicGFnZVwiID8gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoTWF0aC5hYnMoc2VsZi5kcmFnZ2FibGUuc2Nyb2xsUHJveHkudG9wKCkpID49IHBhdXNlSGVpZ2h0KSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYudHdlZW4ucGF1c2UoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBOZXh0IGhlaWdodCBhdCB3aGljaCB0byBwYXVzZSBzY3JvbGxpbmcuXG5cdFx0XHRcdFx0XHRcdHBhdXNlSGVpZ2h0ICs9IGVsZW1lbnRIZWlnaHQ7XG5cblx0XHRcdFx0XHRcdFx0VHdlZW5MaXRlLmRlbGF5ZWRDYWxsKHNlbGYub3B0aW9ucy5wYXVzZSxcblx0XHRcdFx0XHRcdFx0XHRwYWdlQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudHdlZW4ucmVzdW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gOiB1bmRlZmluZWQpLFxuXHRcdFx0XHRcdG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0VHdlZW5MaXRlLmRlbGF5ZWRDYWxsKHNlbGYub3B0aW9ucy5wYXVzZSxcblx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRUd2VlbkxpdGUudG8oc2VsZi5wYWdlLCAxLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhdXRvQWxwaGE6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50d2Vlbi5zZWVrKDApLnBhdXNlKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYub3B0aW9ucy5ieSA9PT0gXCJwYWdlXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYXVzZUhlaWdodCA9IGVsZW1lbnRIZWlnaHQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKHNlbGYuZWxlbWVudCkudHJpZ2dlcihcImRvbmVcIik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBIaWRlIHNjcm9sbGJhci5cblx0XHRcdFx0VHdlZW5MaXRlLnNldCh0aGlzLmVsZW1lbnQsIHsgb3ZlcmZsb3dZOiBcImhpZGRlblwiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5jbGljaykge1xuXHRcdFx0XHRcdC8vIEFjY291bnQgZm9yIGNvbnRlbnQgdGhhdCBpcyB0byBiZSBjbGlja2VkIHdoZW4gY29udGVudCBub3QgbmVlZGVkIHRvIGJlIHNjcm9sbGVkXG5cdFx0XHRcdFx0Ly8gTGV2ZXJhZ2UgRHJhZ2dhYmxlIGZvciB0b3VjaC9jbGljayBldmVudCBoYW5kbGluZ1xuXHRcdFx0XHRcdERyYWdnYWJsZS5jcmVhdGUodGhpcy5lbGVtZW50LCB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInNjcm9sbFRvcFwiLFxuXHRcdFx0XHRcdFx0dGhyb3dQcm9wczogdHJ1ZSxcblx0XHRcdFx0XHRcdGVkZ2VSZXNpc3RhbmNlOiAwLjk1LFxuXHRcdFx0XHRcdFx0bWluaW11bU1vdmVtZW50OiB0aGlzLm9wdGlvbnMubWluaW11bU1vdmVtZW50LFxuXHRcdFx0XHRcdFx0b25DbGljazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdCQoc2VsZi5lbGVtZW50KS50cmlnZ2VyKFwic2Nyb2xsQ2xpY2tcIiwgW3RoaXMucG9pbnRlckV2ZW50XSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR0aGlzLmRyYWdnYWJsZSA9IERyYWdnYWJsZS5nZXQodGhpcy5lbGVtZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Ly8gQ2hlY2sgaWYgY29udGVudCBpcyBsYXJnZXIgdGhhbiB2aWV3YWJsZSBhcmVhIGFuZCBpZiB0aGUgc2Nyb2xsIHNldHRpbmdzIGlzIHNldCB0byBhY3R1YWxseSBzY3JvbGwuXG5cdFx0Y2FuU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnMgJiYgKHRoaXMucGFnZS5oZWlnaHQoKSA+ICQodGhpcy5lbGVtZW50KS5oZWlnaHQoKSk7XG5cdFx0fSxcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdCQodGhpcy5lbGVtZW50KS5yZW1vdmVEYXRhKCk7XG5cdFx0XHRpZiAodGhpcy50d2Vlbikge1xuXHRcdFx0XHR0aGlzLnR3ZWVuLmtpbGwoKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuZHJhZ2dhYmxlKSB7XG5cdFx0XHRcdHRoaXMuZHJhZ2dhYmxlLmtpbGwoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnRzLlxuXHRcdFx0dGhpcy5lbGVtZW50ID0gbnVsbDtcblx0XHRcdHRoaXMucGFnZSA9IG51bGw7XG5cdFx0XHR0aGlzLm9wdGlvbnMgPSBudWxsO1xuXHRcdFx0dGhpcy5fZGVmYXVsdHMgPSBudWxsO1xuXHRcdFx0dGhpcy5kcmFnZ2FibGUgPSBudWxsO1xuXHRcdFx0dGhpcy50d2VlbiA9IG51bGw7XG5cdFx0XHR0aGlzLmNhbGN1bGF0ZVByb2dyZXNzID0gbnVsbDtcblx0XHR9XG5cdH07XG5cblx0UGx1Z2luLnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuY2FuU2Nyb2xsKCkgJiYgdGhpcy5vcHRpb25zLmJ5ICE9PSBcIm5vbmVcIikge1xuXHRcdFx0aWYgKHRoaXMudHdlZW4pIHtcblx0XHRcdFx0aWYgKHRoaXMuaXNMb2FkaW5nKSB7XG5cdFx0XHRcdFx0dGhpcy50d2Vlbi5wbGF5KCk7XG5cdFx0XHRcdFx0dGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRUd2VlbkxpdGUudG8odGhpcy5wYWdlLCAxLCB7YXV0b0FscGhhOiAxfSk7XG5cdFx0XHRcdFx0VHdlZW5MaXRlLmRlbGF5ZWRDYWxsKHRoaXMub3B0aW9ucy5wYXVzZSwgdGhpcy5jYWxjdWxhdGVQcm9ncmVzcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0UGx1Z2luLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLnR3ZWVuKSB7XG5cdFx0XHRUd2VlbkxpdGUua2lsbERlbGF5ZWRDYWxsc1RvKHRoaXMuY2FsY3VsYXRlUHJvZ3Jlc3MpO1xuXHRcdFx0dGhpcy50d2Vlbi5wYXVzZSgpO1xuXHRcdH1cblx0fTtcblxuXHRQbHVnaW4ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy50d2Vlbikge1xuXHRcdFx0VHdlZW5MaXRlLmtpbGxEZWxheWVkQ2FsbHNUbyh0aGlzLmNhbGN1bGF0ZVByb2dyZXNzKTtcblx0XHRcdHRoaXMudHdlZW4ua2lsbCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdFx0dGhpcy5wYWdlID0gbnVsbDtcblx0fTtcblxuXHQvLyBBIGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IgdGhhdCBwcmV2ZW50c1xuXHQvLyBtdWx0aXBsZSBpbnN0YW50aWF0aW9ucy5cblx0JC5mbi5hdXRvU2Nyb2xsID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoISQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpKSB7XG5cdFx0XHRcdCQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUsIG5ldyBQbHVnaW4odGhpcywgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OlwiICsgZm9udE9iai5mb250LmZhbWlseSArIFwiOyBcIjtcbiAgICB2YXIgY29sb3IgPSBcImNvbG9yOiBcIiArIGZvbnRPYmouY29sb3IgKyBcIjsgXCI7XG4gICAgdmFyIHNpemUgPSBcImZvbnQtc2l6ZTogXCIgKyBmb250T2JqLnNpemUgKyBcInB4OyBcIjtcbiAgICB2YXIgd2VpZ2h0ID0gXCJmb250LXdlaWdodDogXCIgKyAoZm9udE9iai5ib2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgaXRhbGljID0gXCJmb250LXN0eWxlOiBcIiArIChmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgdW5kZXJsaW5lID0gXCJ0ZXh0LWRlY29yYXRpb246IFwiICsgKGZvbnRPYmoudW5kZXJsaW5lID8gXCJ1bmRlcmxpbmVcIiA6IFwibm9uZVwiKSArIFwiOyBcIjtcbiAgICB2YXIgaGlnaGxpZ2h0ID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIiArIGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgKyBcIjsgXCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjb250ZW50RG9jKSB7XG4gICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5jbGFzcyAmJiBpdGVtLmZvbnRTZXR0aW5nKSB7XG4gICAgICAgIGFkZENTU1J1bGVzKFsgZ2V0Rm9udENzc1N0eWxlKGl0ZW0uY2xhc3MsIGl0ZW0uZm9udFNldHRpbmcpIF0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5mb250U2V0dGluZy5mb250LnR5cGUpIHtcbiAgICAgICAgaWYgKGl0ZW0uZm9udFNldHRpbmcuZm9udC50eXBlID09PSBcImN1c3RvbVwiICYmIGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHkgJiZcbiAgICAgICAgICBpdGVtLmZvbnRTZXR0aW5nLmZvbnQudXJsKSB7XG4gICAgICAgICAgbG9hZEN1c3RvbUZvbnQoaXRlbS5mb250U2V0dGluZy5mb250LmZhbWlseSwgaXRlbS5mb250U2V0dGluZy5mb250LnVybCxcbiAgICAgICAgICAgIGNvbnRlbnREb2MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0uZm9udFNldHRpbmcuZm9udC50eXBlID09PSBcImdvb2dsZVwiICYmIGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHkpIHtcbiAgICAgICAgICBsb2FkR29vZ2xlRm9udChpdGVtLmZvbnRTZXR0aW5nLmZvbnQuZmFtaWx5LCBjb250ZW50RG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnQoZmFtaWx5LCBjb250ZW50RG9jKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuICAgIGNvbnRlbnREb2MgPSBjb250ZW50RG9jIHx8IGRvY3VtZW50O1xuXG4gICAgc3R5bGVzaGVldC5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIpO1xuICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvY3NzXCIpO1xuICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1cIiArXG4gICAgICBmYW1pbHkpO1xuXG4gICAgaWYgKHN0eWxlc2hlZXQgIT09IG51bGwpIHtcbiAgICAgIGNvbnRlbnREb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHN0eWxlc2hlZXQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlcihwYXJhbSkge1xuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0UXVlcnlQYXJhbWV0ZXI6IGdldFF1ZXJ5UGFyYW1ldGVyLFxuICAgIGdldEZvbnRDc3NTdHlsZTogIGdldEZvbnRDc3NTdHlsZSxcbiAgICBhZGRDU1NSdWxlczogICAgICBhZGRDU1NSdWxlcyxcbiAgICBsb2FkRm9udHM6ICAgICAgICBsb2FkRm9udHMsXG4gICAgbG9hZEN1c3RvbUZvbnQ6ICAgbG9hZEN1c3RvbUZvbnQsXG4gICAgbG9hZEdvb2dsZUZvbnQ6ICAgbG9hZEdvb2dsZUZvbnQsXG4gICAgcHJlbG9hZEltYWdlczogICAgcHJlbG9hZEltYWdlc1xuICB9O1xufSkoKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goW1wiX3NldEFjY291bnRcIiwgXCJVQS01NzA5MjE1OS0xM1wiXSk7XG5fZ2FxLnB1c2goW1wiX3RyYWNrUGFnZXZpZXdcIl0pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7IGdhLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9IChcImh0dHBzOlwiID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gXCJodHRwczovL3NzbFwiIDogXCJodHRwOi8vd3d3XCIpICsgXCIuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanNcIjtcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuLyogZ2xvYmFsIGdhZGdldHM6ZmFsc2UgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5UZXh0ID0ge307XG5cblJpc2VWaXNpb24uVGV4dCA9IChmdW5jdGlvbihnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG4gIHZhciB1dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcztcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSwgdHJ1ZSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIHByZWZzLmdldFN0cmluZyhcImlkXCIpKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QWRkaXRpb25hbFBhcmFtcyhuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIiAmJiB2YWx1ZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgdmFyIGRhdGEgPSBwYXJhbXMuZGF0YTtcbiAgICAgIHZhciBydWxlcyA9IFtdO1xuXG4gICAgICAvLyBTZXQgaGVpZ2h0IG9mIGNvbnRhaW5lciB0byB0aGF0IG9mIFBsYWNlaG9sZGVyIHNvIHRoYXQgc2Nyb2xsaW5nIHdvcmtzLlxuICAgICAgJChcIiNjb250YWluZXJcIikuaGVpZ2h0KHByZWZzLmdldEludChcInJzSFwiKSlcbiAgICAgICAgLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgcGFyYW1zLmJhY2tncm91bmQgfHwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgICQoXCIucGFnZVwiKS53aWR0aChwcmVmcy5nZXRJbnQoXCJyc1dcIikpLmh0bWwoZGF0YSk7XG5cbiAgICAgICQuZWFjaCgkKFwiPGRpdi8+XCIpLmh0bWwoZGF0YSkuZmluZChcInNwYW5cIikuYWRkQmFjaygpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkRm9udCA9ICQodGhpcykuYXR0cihcImRhdGEtc3RhbmRhcmQtZm9udFwiKTtcbiAgICAgICAgdmFyIGdvb2dsZUZvbnQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWdvb2dsZS1mb250XCIpO1xuICAgICAgICB2YXIgY3VzdG9tRm9udCA9ICQodGhpcykuYXR0cihcImRhdGEtY3VzdG9tLWZvbnRcIik7XG4gICAgICAgIHZhciB0ZXh0Q29sb3IgPSBcIlwiLCBoaWdobGlnaHRDb2xvciA9IFwiXCI7XG4gICAgICAgIHZhciBjbGFzc2VzID0gW107XG5cbiAgICAgICAgLy8gQWRkIENTUyBmb3Igc3RhbmRhcmQgZm9udHMuXG4gICAgICAgIGlmIChzdGFuZGFyZEZvbnQpIHtcbiAgICAgICAgICBydWxlcy5wdXNoKGNyZWF0ZUZvbnRSdWxlKHN0YW5kYXJkRm9udCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBHb29nbGUgZm9udC5cbiAgICAgICAgaWYgKGdvb2dsZUZvbnQpIHtcbiAgICAgICAgICB1dGlscy5sb2FkR29vZ2xlRm9udChnb29nbGVGb250KTtcblxuICAgICAgICAgIC8vIEFkZCBDU1MgZm9yIHRoZSBHb29nbGUgZm9udCBwbHVzIGEgZmFsbGJhY2suXG4gICAgICAgICAgcnVsZXMucHVzaChjcmVhdGVGb250UnVsZShnb29nbGVGb250KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2FkIGN1c3RvbSBmb250LlxuICAgICAgICBpZiAoY3VzdG9tRm9udCkge1xuICAgICAgICAgIHV0aWxzLmxvYWRDdXN0b21Gb250KGN1c3RvbUZvbnQsICQodGhpcykuYXR0cihcImRhdGEtY3VzdG9tLWZvbnQtdXJsXCIpKTtcblxuICAgICAgICAgIC8vIEFkZCBDU1MgZm9yIHRoZSBjdXN0b20gZm9udCBwbHVzIGEgZmFsbGJhY2suXG4gICAgICAgICAgcnVsZXMucHVzaChjcmVhdGVGb250UnVsZShjdXN0b21Gb250KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGV4dCBhbmQgaGlnaGxpZ2h0IGNvbG91cnMuXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzTmFtZS5zcGxpdChcIiBcIik7XG4gICAgICAgIHRleHRDb2xvciA9ICQodGhpcykuYXR0cihcImRhdGEtdGV4dC1jb2xvclwiKTtcbiAgICAgICAgaGlnaGxpZ2h0Q29sb3IgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWhpZ2hsaWdodC1jb2xvclwiKTtcblxuICAgICAgICAvKiBDaGVjayBpZiBhbnkgb2YgdGhlIGNsYXNzZXMgc3RhcnQgd2l0aCAnd3lzaXd5Zy10ZXh0LWNvbG9yJyBvclxuICAgICAgICAgICAnd3lzaXd5Zy1oaWdobGlnaHQtY29sb3InLiAqL1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjbGFzc2VzW2ldLmluZGV4T2YoXCJ3eXNpd3lnLXRleHQtY29sb3JcIikgPT09IDApIHtcbiAgICAgICAgICAgIHJ1bGVzLnB1c2goXCIuXCIgKyBjbGFzc2VzW2ldICsgXCIgeyBjb2xvcjogXCIgKyB0ZXh0Q29sb3IgKyBcIjsgfVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2xhc3Nlc1tpXS5pbmRleE9mKFwid3lzaXd5Zy1oaWdobGlnaHQtY29sb3JcIikgPT09IDApIHtcbiAgICAgICAgICAgIHJ1bGVzLnB1c2goXCIuXCIgKyBjbGFzc2VzW2ldICsgXCIgeyBiYWNrZ3JvdW5kLWNvbG9yOiBcIiArXG4gICAgICAgICAgICAgIGhpZ2hsaWdodENvbG9yICsgXCI7IH1cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdXRpbHMuYWRkQ1NTUnVsZXMocnVsZXMpO1xuXG4gICAgICAkKFwiI2NvbnRhaW5lclwiKS5hdXRvU2Nyb2xsKHBhcmFtcy5zY3JvbGwpXG4gICAgICAub24oXCJkb25lXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZWFkeSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlRm9udFJ1bGUoZm9udCkge1xuICAgIHJldHVybiBcIi53eXNpd3lnLWZvbnQtZmFtaWx5LVwiICsgZm9udC5yZXBsYWNlKC8gL2csIFwiLVwiKS50b0xvd2VyQ2FzZSgpICtcbiAgICAgIFwiIHsgZm9udC1mYW1pbHk6ICdcIiArIGZvbnQgKyBcIicsIHNlcmlmOyB9XCI7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgICQoXCIjY29udGFpbmVyXCIpLmRhdGEoXCJwbHVnaW5fYXV0b1Njcm9sbFwiKS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAkKFwiI2NvbnRhaW5lclwiKS5kYXRhKFwicGx1Z2luX2F1dG9TY3JvbGxcIikucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0QWRkaXRpb25hbFBhcmFtczogZ2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBwbGF5ICAgICAgICAgICAgICAgOiBwbGF5LFxuICAgIHBhdXNlICAgICAgICAgICAgICA6IHBhdXNlLFxuICAgIHN0b3AgICAgICAgICAgICAgICA6IHN0b3BcbiAgfTtcbn0pKGdhZGdldHMpO1xuXG4vKiBnbG9iYWwgUmlzZVZpc2lvbiwgZ2FkZ2V0cyAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuICB2YXIgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVGV4dC5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLlRleHQucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5UZXh0LnN0b3AoKTtcbiAgfVxuXG4gIC8vIEdldCBhZGRpdGlvbmFsIHBhcmFtZXRlcnMuXG4gIGlmIChpZCkge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIFJpc2VWaXNpb24uVGV4dC5nZXRBZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFwiYWRkaXRpb25hbFBhcmFtc1wiKTtcbiAgfVxuXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
